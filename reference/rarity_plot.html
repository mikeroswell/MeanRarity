<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Construct rarity balance plot — rarity_plot • MeanRarity</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Construct rarity balance plot — rarity_plot" />
<meta property="og:description" content="This function takes the abundance vector, scaling exponent, and target means
(Default the Pythagorean means), and returns a formatted 1-panel ggplot
object." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MeanRarity</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Estimating_Mean_Rarity.html">Estimating mean rarity</a>
    </li>
    <li>
      <a href="../articles/Gods_estimator.html">Gods estimator of mean rarity</a>
    </li>
    <li>
      <a href="../articles/Using_MeanRarity.html">Using MeanRarity</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Construct rarity balance plot</h1>
    
    <div class="hidden name"><code>rarity_plot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes the abundance vector, scaling exponent, and target means
(Default the Pythagorean means), and returns a formatted 1-panel ggplot
object.</p>
    </div>

    <pre class="usage"><span class='fu'>rarity_plot</span><span class='op'>(</span><span class='va'>ab</span>, <span class='va'>l</span>, means <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>1</span>, noco <span class='op'>=</span> <span class='fl'>1</span>, lines <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ab</th>
      <td><p>A numeric vector of species abundances or relative abundances.</p></td>
    </tr>
    <tr>
      <th>l</th>
      <td><p>Scaling exponent for the mean, can be any real number.</p></td>
    </tr>
    <tr>
      <th>means</th>
      <td><p>Numeric vector of scaling exponent values corresponding to
reference (by default, Pythagorean) means.</p></td>
    </tr>
    <tr>
      <th>noco</th>
      <td><p>Scalar, shrinks text and points if plotting multiple balance
plots in a single plotting window.</p></td>
    </tr>
    <tr>
      <th>lines</th>
      <td><p>Logical, should each individual be plotted as a "box" or should
individuals be summarized simply as the height of a line segment.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to other functions.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Hill diversity, or "mean rarity," is the balance point for the community
along the rarity scale. The image produced by <code>rarity_plot</code> illustrates
this balance. Each block represents an individual: because Hill
diversities are weighted by abundance, the “mass” of each “block” is the same
regardless of species identity. Each individual’s x-axis value is given its
species’s "rarity," which is the reciprocal of its relative abundance. The
parameter <code>l</code> controls how rarity is scaled. A community’s balance
point along the rarity scale, pictured as a triangular fulcrum, is the mean
rarity, or diversity, of the community.</p>
<p>To ease comparison across scales, by default the Pythagorean means
(<a href='https://en.wikipedia.org/wiki/Mean'>https://en.wikipedia.org/wiki/Mean</a>) are marked
with reference points: the arithmetic mean with a rose dot, the geometric
mean with a blue dot, and the harmonic mean with a green dot. The arithmetic
scale provides high leverage to very rare species; although they carry little
weight (few individuals), these species influence the mean a great deal
because they sit far to the right of the rarity scale. The arithmetic mean
rarity of the community is the Hill diversity when \(\ell = 1\), and is equal to
species richness. The logarithmic scale provides less leverage to very rare
species. Thus, the geometric mean rarity of the community is lower. The
geometric mean rarity is also known as the Hill-Shannon diversity, or the
Hill diversity when \(\ell = 0\). The reciprocal scale accords more leverage to low
rarity values. Thus, the harmonic mean rarity, also known as the Hill-Simpson
diversity, or Hill diversity when \(\ell = -1\), is much lower still. An
interactive online application that enables users to specify species
abundances and the scaling parameter is available at
<a href='https://mean-rarity.shinyapps.io/rshiny_app1/'>https://mean-rarity.shinyapps.io/rshiny_app1/</a></p>
<p>The scaling of various plot elements depends on the plotting device.
Rstudio's seems especially touchy based on window size. The defaults here
pertain to the standard 7"x7" plotting window given by <code><a href='https://rdrr.io/r/grDevices/quartz.html'>quartz()</a></code> or
<code><a href='https://rdrr.io/r/grDevices/pdf.html'>pdf()</a></code>. They also seem to play nice on the shiny app
<a href='https://mean-rarity.shinyapps.io/rshiny_app1/'>https://mean-rarity.shinyapps.io/rshiny_app1/</a>. Other window sizes or
devices may require tweaking.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>This function depends on internal functions in the
<code><a href='MeanRarity-package.html'>MeanRarity</a></code> package which can be accessed with <code><a href='https://rdrr.io/r/base/ns-dblcolon.html'>:::</a></code> e.g.
<code>MeanRarity:::scale_plot</code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>ab</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>20</span>,<span class='fl'>8</span>,<span class='fl'>5</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>1</span><span class='op'>)</span>

<span class='co'># experiment with other abundance vectors!</span>
<span class='co'># ab &lt;- c(20, 15, 9, 3, 2, 1, 1)</span>
<span class='co'># ab &lt;- c(100, 20, 15, 9, 3, 2, 1, 1)</span>
<span class='co'># ab &lt;- c(50,30,20,0,0,0)</span>
<span class='co'># ab &lt;- c(4,3,2)</span>
<span class='co'># ab &lt;- c(20, 15, 9, 3, 2, 1, 1, 0, 0)</span>
<span class='co'># ab &lt;- c(200,100, 20, 15, 9, 3, 2, 1, 1)</span>
<span class='co'># ab &lt;- floor(exp(rnorm(50, 4, 1.5)))</span>

<span class='va'>richness</span> <span class='op'>&lt;-</span> <span class='fu'>rarity_plot</span><span class='op'>(</span><span class='va'>ab</span>, <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      rarity plot expects a square viewport (likely issues in the RStudio plotting device) and resizes points based on
#&gt;      min(dev.size() and noco (for number of columns).
#&gt;      Selecting lines = T will plot stacks of individuals as a line element,
#&gt;      which tends to be more robust to window size.
#&gt;      Setting lines = T may be the best way to deal with overplotting,
#&gt;      which results from several species with similar but not identical rarities. 
#&gt;  </div><div class='output co'>#&gt; </div><div class='output co'>#&gt; [1] "diversity = 6"            "community size = 40"     
#&gt; [3] "max observed rarity = 40" "min observed rarity = 2" </div><div class='input'><span class='va'>Hill_Shannon</span> <span class='op'>&lt;-</span> <span class='fu'>rarity_plot</span><span class='op'>(</span><span class='va'>ab</span>, <span class='fl'>0</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      rarity plot expects a square viewport (likely issues in the RStudio plotting device) and resizes points based on
#&gt;      min(dev.size() and noco (for number of columns).
#&gt;      Selecting lines = T will plot stacks of individuals as a line element,
#&gt;      which tends to be more robust to window size.
#&gt;      Setting lines = T may be the best way to deal with overplotting,
#&gt;      which results from several species with similar but not identical rarities. 
#&gt;  </div><div class='output co'>#&gt; </div><div class='output co'>#&gt; [1] "diversity = 4.05787109319726" "community size = 40"         
#&gt; [3] "max observed rarity = 40"     "min observed rarity = 2"     </div><div class='input'><span class='va'>Hill_Simpson</span> <span class='op'>&lt;-</span> <span class='fu'>rarity_plot</span><span class='op'>(</span><span class='va'>ab</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      rarity plot expects a square viewport (likely issues in the RStudio plotting device) and resizes points based on
#&gt;      min(dev.size() and noco (for number of columns).
#&gt;      Selecting lines = T will plot stacks of individuals as a line element,
#&gt;      which tends to be more robust to window size.
#&gt;      Setting lines = T may be the best way to deal with overplotting,
#&gt;      which results from several species with similar but not identical rarities. 
#&gt;  </div><div class='output co'>#&gt; </div><div class='output co'>#&gt; [1] "diversity = 3.13725490196078" "community size = 40"         
#&gt; [3] "max observed rarity = 40"     "min observed rarity = 2"     </div><div class='input'>
<span class='va'>richness</span>
</div><div class='img'><img src='rarity_plot-1.png' alt='' width='700' height='700' /></div><div class='input'><span class='va'>Hill_Shannon</span>
</div><div class='img'><img src='rarity_plot-2.png' alt='' width='700' height='700' /></div><div class='input'><span class='va'>Hill_Simpson</span>
</div><div class='img'><img src='rarity_plot-3.png' alt='' width='700' height='700' /></div><div class='input'>
<span class='co'># richness + Hill_Shannon + Hill_Simpson # plot with patchwork</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Roswell, Jonathan Dushoff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


